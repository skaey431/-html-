<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>메인 페이지</title>
<style>
  table, th, td { border:1px solid black; border-collapse: collapse; padding:5px; text-align:center; }
  th { background:#eee; cursor:pointer; }
  button { margin:5px; }
  .modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:flex-start; padding-top:50px; overflow:auto; }
  .modal-content { background:white; padding:20px; border-radius:5px; max-height:90%; overflow-y:auto; min-width:700px; }
  .unitDisplay, .barracksDisplay { display:block; margin-top:3px; font-weight:bold; }
  .tab { display:inline-block; margin-right:5px; padding:5px; background:#ddd; cursor:pointer; border-radius:3px; }
  .tab.active { background:#bbb; font-weight:bold; }
  .tab-content { display:none; margin-top:10px; }
  .tab-content.active { display:block; }
</style>
</head>
<body>

<h2>메인 페이지</h2>

<button id="btnCCTV">CCTV 관리</button>
<button id="btnMaintenance">유지보수 관리</button>
<button id="btnLeave">휴가 관리</button>

<h3>CCTV 근무자 현황</h3>
<table id="cctvSummary">
  <thead>
    <tr><th>이름</th><th>중대</th><th>생활관</th></tr>
  </thead>
  <tbody></tbody>
</table>

<h3>휴가자 요약</h3>
<table id="leaveSummary">
  <thead>
    <tr><th>이름</th><th>중대</th><th>생활관</th><th>휴가 시작</th><th>휴가 종료</th></tr>
  </thead>
  <tbody></tbody>
</table>

<!-- CCTV 모달 -->
<div id="cctvModal" class="modal">
  <div class="modal-content">
    <h3>CCTV 관리</h3>
    <table id="cctvTable">
      <thead><tr><th>구분</th><th colspan="4">칸</th></tr></thead>
      <tbody>
        <tr id="dayRow"><td>주간</td></tr>
        <tr id="nightRow"><td>야간</td></tr>
      </tbody>
    </table>
    <button id="btnSaveCCTV">저장 후 닫기</button>
    <button id="btnCloseCCTV">닫기</button>
  </div>
</div>

<!-- 유지보수 모달 -->
<div id="maintenanceModal" class="modal">
  <div class="modal-content">
    <h3>유지보수 관리</h3>
    <div id="tabs">
      <div class="tab active" data-tab="tab-company">중대 관리</div>
      <div class="tab" data-tab="tab-soldier">용사 신상 관리</div>
      <div class="tab" data-tab="tab-exemption">열외사유 관리</div>
    </div>

    <div id="tab-company" class="tab-content active">
      <table id="maintenanceTable">
        <tbody></tbody>
      </table>                                                              
      <button id="btnAddCompany">중대 추가</button>
      <button id="btnSaveMaintenance">저장 후 닫기</button>
    </div>

    <div id="tab-soldier" class="tab-content">
      <h3>용사 신상 관리</h3>
      <input type="text" id="soldierSearch" placeholder="이름 검색...">
      <br><br>
      <table id="soldierTable">
        <thead>
          <tr><th>삭제</th><th>이름</th><th>중대</th><th>생활관</th><th>입대</th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <button id="addSoldierBtn">행 추가</button>
      <button id="deleteSoldierBtn">삭제 선택 행</button>
      <button id="saveSoldierBtn">저장</button>
    </div>

    <div id="tab-exemption" class="tab-content">
      <table id="exemptionTable">
        <thead><tr><th>삭제</th><th>이름</th><th>사유</th></tr></thead>
        <tbody></tbody>
      </table>
      <button id="btnAddExemption">행 추가</button>
      <button id="btnDeleteExemption">삭제 선택 행</button>
      <button id="btnSaveExemption">저장</button>
    </div>

    <button id="btnCloseMaintenance">닫기</button>
  </div>
</div>

<!-- Leave 모달 -->
<div id="leaveModal" class="modal">
  <div class="modal-content">
    <h3>휴가 관리</h3>
    <table id="leaveTable">
      <thead>
        <tr><th>이름</th><th>중대</th><th>생활관</th><th>휴가 시작</th><th>휴가 종료</th><th>삭제</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <button id="btnAddLeave">행 추가</button>
    <button id="btnDeleteLeave">삭제 선택 행</button>
    <button id="btnSaveLeave">저장 후 닫기</button>
    <button id="btnCloseLeave">닫기</button>
  </div>
</div>

<script src="js/main.js"></script>
<script src="js/cctv.js"></script>
<script src="js/soldier.js"></script>
<script src="js/co.js"></script>
<script src="js/leave.js"></script>
<script src="js/maintenance.js"></script>
<script src="js/return.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // 탭 전환
  document.querySelectorAll("#tabs .tab").forEach(tab => {
    tab.addEventListener("click", () => {
      document.querySelectorAll("#tabs .tab").forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      document.querySelectorAll(".tab-content").forEach(tc => tc.classList.remove('active'));
      document.getElementById(tab.dataset.tab).classList.add('active');
    });
  });

  // CCTV 모달
  document.getElementById("btnCCTV").addEventListener("click", () => openModal("cctvModal"));
  document.getElementById("btnSaveCCTV").addEventListener("click", saveCCTV);
  document.getElementById("btnCloseCCTV").addEventListener("click", () => closeModal("cctvModal"));

  // 유지보수 모달
  document.getElementById("btnMaintenance").addEventListener("click", openMaintenanceModal);
  document.getElementById("btnAddCompany").addEventListener("click", addCompany);
  document.getElementById("btnSaveMaintenance").addEventListener("click", saveMaintenance);
  document.getElementById("btnCloseMaintenance").addEventListener("click", () => closeModal("maintenanceModal"));

  // 열외 관리
  document.getElementById("btnAddExemption").addEventListener("click", addExemptionRow);
  document.getElementById("btnDeleteExemption").addEventListener("click", deleteExemptionRows);
  document.getElementById("btnSaveExemption").addEventListener("click", saveExemptions);

  // 휴가 모달
  document.getElementById("btnLeave").addEventListener("click", openLeaveModal);
  document.getElementById("btnAddLeave").addEventListener("click", addLeaveRow);
  document.getElementById("btnDeleteLeave").addEventListener("click", deleteLeaveRows);
  document.getElementById("btnSaveLeave").addEventListener("click", saveLeave);
  document.getElementById("btnCloseLeave").addEventListener("click", closeLeaveModal);
});
</script>

</body>
</html>
