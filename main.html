<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>메인 페이지</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<h2>메인 페이지</h2>

<button id="btnMaintenance">유지보수 관리</button>
<button id="btnLeave">휴가 관리</button>

<h3>생활관 요약</h3>
<table id="barracksSummary">
  <thead>
    <tr><th>생활관</th><th>근무자</th><th>휴가자</th></tr>
  </thead>
  <tbody></tbody>
</table>

<!-- 유지보수 모달 -->
<div id="maintenanceModal" class="modal">
  <div class="modal-content">
    <h3>유지보수 관리</h3>
    <div id="tabs">
      <div class="tab active" data-tab="tab-company">중대 관리</div>
      <div class="tab" data-tab="tab-soldier">용사 신상 관리</div>
      <div class="tab" data-tab="tab-exemption">열외사유 관리</div>
    </div>

    <div id="tab-company" class="tab-content active">
      <table id="maintenanceTable">
        <tbody></tbody>
      </table>                                                              
      <button id="btnAddCompany">중대 추가</button>
      <button id="btnSaveMaintenance">저장</button>
    </div>

    <div id="tab-soldier" class="tab-content">
      <h3>용사 신상 관리</h3>
      <input type="text" id="soldierSearch" placeholder="이름 검색...">
      <br><br>
      <table id="soldierTable">
        <thead>
          <tr><th>삭제</th><th>이름</th><th>중대</th><th>생활관</th><th>입대</th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <button id="addSoldierBtn">행 추가</button>
      <button id="deleteSoldierBtn">삭제 선택 행</button>
      <button id="saveSoldierBtn">저장</button>
    </div>

    <div id="tab-exemption" class="tab-content">
      <table id="exemptionTable">
        <thead><tr><th>삭제</th><th>이름</th><th>사유</th></tr></thead>
        <tbody></tbody>
      </table>
      <button id="btnAddExemption">행 추가</button>
      <button id="btnDeleteExemption">삭제 선택 행</button>
      <button id="btnSaveExemption">저장</button>
    </div>

    <button id="btnCloseMaintenance">닫기</button>
  </div>
</div>

<!-- Leave 모달 -->
<div id="leaveModal" class="modal">
  <div class="modal-content">
    <h3>휴가 관리</h3>
    <table id="leaveTable">
      <thead>
        <tr><th>이름</th><th>중대</th><th>생활관</th><th>휴가 시작</th><th>휴가 종료</th><th>삭제</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <button id="btnAddLeave">행 추가</button>
    <button id="btnDeleteLeave">삭제 선택 행</button>
    <button id="btnSaveLeave">저장 후 닫기</button>
    <button id="btnCloseLeave">닫기</button>
  </div>
</div>
<!-- 총기함 관리 모달 -->
<div id="armoryModal" class="modal">
  <div class="modal-content">
    <h3>생활관 총기함</h3>
    <table id="armoryRoomsTable">
      <thead><tr><th>생활관</th><th>총기함</th></tr></thead>
      <tbody></tbody>
    </table>

    <h3>생활관 외</h3>
    <table id="armorySpecialTable">
      <thead><tr><th>생활관 외</th><th>총기함</th><th>삭제</th></tr></thead>
      <tbody></tbody>
    </table>
    <button onclick="saveArmory()">저장</button>
    <button onclick="document.getElementById('armoryModal').style.display='none'">닫기</button>
  </div>
</div>


<script src="js/main.js"></script>
<script src="js/soldier.js"></script>
<script src="js/co.js"></script>
<script src="js/leave.js"></script>
<script src="js/maintenance.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // 탭 전환
  document.querySelectorAll("#tabs .tab").forEach(tab => {
    tab.addEventListener("click", () => {
      document.querySelectorAll("#tabs .tab").forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      document.querySelectorAll(".tab-content").forEach(tc => tc.classList.remove('active'));
      document.getElementById(tab.dataset.tab).classList.add('active');
    });
  });

  // 유지보수 모달
  document.getElementById("btnMaintenance").addEventListener("click", () => openModal("maintenanceModal"));
  document.getElementById("btnAddCompany").addEventListener("click", addCompany);
  document.getElementById("btnSaveMaintenance").addEventListener("click", saveMaintenance);
  document.getElementById("btnCloseMaintenance").addEventListener("click", () => closeModal("maintenanceModal"));

  // 열외 관리
  document.getElementById("btnAddExemption").addEventListener("click", addExemptionRow);
  document.getElementById("btnDeleteExemption").addEventListener("click", deleteExemptionRows);
  document.getElementById("btnSaveExemption").addEventListener("click", saveExemptions);

  // 휴가 모달
  document.getElementById("btnLeave").addEventListener("click", openLeaveModal);
  document.getElementById("btnAddLeave").addEventListener("click", addLeaveRow);
  document.getElementById("btnDeleteLeave").addEventListener("click", deleteLeaveRows);
  document.getElementById("btnSaveLeave").addEventListener("click", saveLeave);
  document.getElementById("btnCloseLeave").addEventListener("click", closeLeaveModal);
});
</script>

</body>
</html>
